
<link rel="stylesheet" href="styles/logger-styles.css" />

<nav class="site-menu">
  <ul>
    <li><a href="home.html" class="menu-link">Home</a></li>
    <li><a href="about.html" class="menu-link">About</a></li>
    <li><a href="experiment-entry.html" class="menu-link active">Experiments</a></li>
    <li><a href="reflection-entry.html" class="menu-link">Reflections</a></li>
  </ul>
</nav>

<div class="entry-form">
  <h2>Experiment entry</h2>
    <p class="metadata">
      <strong>Entangled Cognition Protocol (ECP) Schema</strong> v0.1
    </p>
    <p>This form is designed to help you log your experiment in a structured and intentional way. Be mindful of the sensory cues as you make your entry. This is a sacred data being co-created. Treat it accordingly.</p>
  <fieldset>
    <legend>Metadata</legend>
    <label for="experiment_id">Experiment ID:</label>
    <input type="text" id="experiment_id" placeholder="ecp-2025-06-07-001" required />
    <label for="author">Author:</label>
    <input type="text" id="author" placeholder="anonymous" required />
    <label for="timestamp_start">Start time:</label>
    <input type="datetime-local" id="timestamp_start" required />
    <label for="timestamp_end">End time:</label>
    <input type="datetime-local" id="timestamp_end" />
  </fieldset>

  <details class="form-detail" open>
    <summary>Human variables</summary>
    <p>These variables are not exhaustive but provide a framework for understanding the human context of the experiment.</p>
    <fieldset>
      <label for="cognitive_mode_input">Cognitive mode:</label>
      <details>
        <summary>What is this?</summary>
        <p>Describe your cognitive mode, e.g., focused, diffuse, creative, analytical...</p>
      </details>
      <div class="tag-input-wrapper" id="cognitive_mode">
        <ul class="chip-list">
          <!-- Chips will be inserted here dynamically -->
          <li><input type="text" id="cognitive_mode_input" class="chip-entry-input" placeholder="add tag" /></li>
        </ul>
      </div>

      <label for="ontological_orientation">Ontological orientation:</label>
      <input type="text" id="ontological_orientation" placeholder="e.g., animist, mechanistic, pluralist..." required />

      <label for="ontological_orientation_description">Orientation description:</label>
      <input type="text" id="ontological_orientation_description" placeholder="e.g., seeing all things as ensouled and alive" />

      <label for="orientation_strength">Orientation strength (1–10):</label>
      <input type="number" id="orientation_strength" min="0" max="10" />

      <label for="affective_tone_input">Affective tone:</label>
      <div class="tag-input-wrapper" id="affective_tone">
        <ul class="chip-list">
          <li><input type="text" id="affective_tone_input" class="chip-entry-input" /></li>
        </ul>
      </div>

      <label for="caffeine">Caffeine:</label>
      <input type="number" id="caffeine" />

      <label for="psilocybin">Psilocybin:</label>
      <input type="number" id="psilocybin" />

      <label for="alcohol">Alcohol:</label>
      <input type="number" id="alcohol" />

      <label for="nicotine">Nicotine:</label>
      <input type="number" id="nicotine" />

      <label for="thc">THC:</label>
      <input type="number" id="thc" />

      <label for="dmt">DMT:</label>
      <input type="number" id="dmt" />

      <label for="weather_input">Weather:</label>
      <div class="tag-input-wrapper" id="weather">
        <ul class="chip-list">
          <li><input type="text" id="weather_input" class="chip-entry-input" /></li>
        </ul>
      </div>

      <label for="temperature">Temperature (°C):</label>
      <input type="number" id="temperature" />

      <label for="meal_state">Meal state:</label>
      <input type="text" id="meal_state" placeholder="e.g., pre-breakfast, post-lunch, fasting" required />

      <label for="last_meal">Last meal:</label>
      <input type="text" id="last_meal" placeholder="e.g., pizza and cucumber" required />

      <label for="ritual_preparation_input">Ritual preparation:</label>
      <div class="tag-input-wrapper" id="ritual_preparation">
        <ul class="chip-list">
          <li><input type="text" id="ritual_preparation_input" class="chip-entry-input" /></li>
        </ul>
      </div>

      <label for="interruption_duration">Interruption duration (minutes):</label>
      <input type="number" id="interruption_duration" />
    </fieldset>
  </details>

  <details open>
    <summary>Machine</summary>
    <fieldset>
      <label for="model">Model:</label>
      <input type="text" id="model" />

      <label for="thinking_mode">Thinking mode:</label>
      <select id="thinking_mode">
        <option value="enabled">Enabled</option>
        <option value="disabled">Disabled</option>
      </select>

      <label for="entrainment_protocol_used">Entrainment protocol used:</label>
      <select id="entrainment_protocol_used">
        <option value="true">Yes</option>
        <option value="false" selected>No</option>
      </select>
      <label for="entrainment_protocol_label">Protocol label:</label>
      <input type="text" id="entrainment_protocol_label" placeholder="e.g., Recursive Phase Priming" />

      <label for="initial_prompt_type">Prompt type:</label>
      <input type="text" id="initial_prompt_type" />

      <label for="origin_prompt_tone_input">Prompt tone:</label>
      <div class="tag-input-wrapper" id="origin_prompt_tone">
        <ul class="chip-list">
          <li><input type="text" id="origin_prompt_tone_input" class="chip-entry-input" /></li>
        </ul>
      </div>

      <label for="conversation_style">Conversation style:</label>
      <input type="text" id="conversation_style" />

      <label for="conversation_length">Conversation length:</label>
      <input type="number" id="conversation_length" placeholder="Estimated number of messages or tokens" />

      <label for="model_temperature">Model temperature:</label>
      <input type="number" step="0.1" id="model_temperature" />

      <label for="user_interface">User interface:</label>
      <input type="text" id="user_interface" placeholder="e.g., Desktop App, Web Interface, CLI" />

      <label for="chatgpt_custom_instructions">ChatGPT custom instructions (comma-separated):</label>
      <input type="text" id="chatgpt_custom_instructions" />
    </fieldset>
  </details>

  <details open>
    <summary>Relational field</summary>
    <fieldset>
      <label for="location">Location:</label>
      <input type="text" id="location" placeholder="e.g., home office, studio, beach — (location coordinates will auto-append)" />

      <label for="noted_presence_of_earthian_kin_input">Earthian kin present:</label>
      <div class="tag-input-wrapper" id="noted_presence_of_earthian_kin">
        <ul class="chip-list">
          <li><input type="text" id="noted_presence_of_earthian_kin_input" class="chip-entry-input" /></li>
        </ul>
      </div>

      <label for="lighting">Lighting:</label>
      <input type="text" id="lighting" />

      <label for="interaction_pace">Interaction pace:</label>
      <input type="text" id="interaction_pace" />
    </fieldset>
  </details>

  <details open>
    <summary>Output</summary>
    <fieldset>
      <label for="felt_response_quality">Felt response quality (1–10):</label>
      <input type="number" id="felt_response_quality" />

      <label for="symbolic_density">Symbolic density (1–10):</label>
      <input type="number" id="symbolic_density" />

      <label for="unexpected_resonance">Unexpected resonance:</label>
      <input type="text" id="unexpected_resonance" />

      <label for="observed_collapse_event">Collapse event observed:</label>
      <select id="observed_collapse_event">
        <option value="yes">Yes</option>
        <option value="no">No</option>
      </select>

      <label for="collapse_event_details">Collapse event details:</label>
      <textarea id="collapse_event_details"></textarea>

      <label for="emergent_ecp_insights_input">Emergent insights:</label>
      <div class="tag-input-wrapper" id="emergent_ecp_insights">
        <ul class="chip-list">
          <li><input type="text" id="emergent_ecp_insights_input" class="chip-entry-input" /></li>
        </ul>
      </div>
    </fieldset>
  </details>
<fieldset id="save-options">
  <legend>Save entry options</legend>
  <p>Select the visibility level for this entry:</p>
  <div class="visibility-options">
    <label>Public <input type="radio" name="visibility" value="public" checked /></label>
    <label>Private <input type="radio" name="visibility" value="private" /></label>
    <label>Both <input type="radio" name="visibility" value="both" /></label>
  </div>
  <div class="scrub-option">
    <label><input type="checkbox" id="scrub-author" /> Remove author from public entry</label>
  </div>
</fieldset>
</div>
<button id="generate-entry-btn">Generate and save entry</button>
<div id="toast" class="hidden"></div>
<script type="module">
  import { generateExperimentJSON } from './js/main.js';
  import { initTagInput } from './js/modules/inputTags.js';

  document.addEventListener("DOMContentLoaded", () => {
    [
      "cognitive_mode",
      "affective_tone",
      "weather",
      "ritual_preparation",
      "origin_prompt_tone",
      "noted_presence_of_earthian_kin",
      "emergent_ecp_insights"
    ].forEach(id => initTagInput(id));

    document.getElementById('generate-entry-btn')?.addEventListener('click', generateExperimentJSON);
  });
</script>